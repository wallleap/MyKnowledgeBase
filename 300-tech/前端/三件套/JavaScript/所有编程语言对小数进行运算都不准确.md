---
title: 所有编程语言对小数进行运算都不准确
date: 2024-09-19T02:34:55+08:00
updated: 2024-09-25T05:27:16+08:00
dg-publish: false
---

计算机数字的运算不精确问题

小数部分

- **存储** 转 2 进制：乘 2 取整，顺序排列，可能出现无限循环，计算机存储位数有限，如果存储位数那里截取，后面那个为 1 则进 1，如果后面那个为 0，则不变
- **运算** 2 进制运算，计算过程中可能会进行抵消
- **显示** 浏览器在显示的时候会做近似处理、猜测

直接加减、toFixed 都会有误差

举例

```js
0.1 + 0.2

2.45.toString(2)  // 不精确
2.45.toPrecision(100)  // 2.450000...
2.45.toFixed(1)  // 2.5
2.55.toString(2)  // 不精确
2.55.toPrecision(100)  // 2.54999...
2.55.toFixed(1)  // 2.5
```

如何解决：存储字符串，通过循环字符串来进行运算，例如库 decimal.js
