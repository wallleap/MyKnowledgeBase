---
title: JS 类型转换
date: 2024-09-12T06:57:27+08:00
updated: 2024-09-12T07:20:53+08:00
dg-publish: false
---

```js
console.log(([][[]] + [])[+!![]] + ([] + {})[+!![] + !![]])
```

打印出 `'nb'`

- `[][[]]` 取数组的某一项
	- 里面是空数组就会转换成空字符串 `[]['']`
	- 所以就得到 `undefined`
- `undefined + []` 原始类型加对象类型
	- 把对象转成原始类型，空数组转成空字符串 `undefined + ''`
	- 转成字符串 `'undefined'`
- `+!![]`
	- 任何数据前面两次取反，就是转成布尔类型 `+true`
	- `+` 转成数字，`1`

```js
'undefined'[1] // n
```

- `[] + {}` 两个对象相加都转成原始类型
	- `'' + [object Object]`
	- `'[object Object]'`
- `[+!![] + !![]]`
	- `[1 + 1]`
	- `[2]`

```js
'[object Object]'[2]  // b
```

再看一个

```js
console.log((![] + [])[+!![] + !![] + !![]] + ([] + {})[+!![] + +!![]])
// 'false'[3] + '[object Object]'[2]
```

双等号判定会自动类型转换

```js
[] == ![]  // true
```

- 数组是对象，进行布尔判定为 true 取反 `[] == false`
- 左右两边类型不一致，都转成原始类型，空数组先调用 valueOf，还不是原始类型，接着调用 `[].toString()` 就是一个空字符串 `'' == false`
- 都是原始类型，两边不一致都转成数字 `0 == 0`
