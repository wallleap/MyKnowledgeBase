---
title: 012-å‡½æ•°ç›¸å…³
date: 2023-03-10 20:30
updated: 2023-03-19 22:34
cover: //cdn.wallleap.cn/img/post/1.jpg
image-auto-upload: false
author: Luwang
comments: true
aliases:
  - 012-å‡½æ•°ç›¸å…³
rating: 1
tags:
  - JavaScript
category: web
keywords:
  - å…³é”®è¯1
  - å…³é”®è¯2
  - å…³é”®è¯3
description: æ–‡ç« æè¿°
source: null
url: //myblog.wallleap.cn/post/1
---

## å‡½æ•°

å‡½æ•°æ˜¯ä¸€ä¸ªèƒ½å®ç°ç‰¹å®šåŠŸèƒ½çš„å›ºå®šç¨‹åºæ®µï¼Œå¸¦æœ‰ä¸€ä¸ªå…¥å£å’Œä¸€ä¸ªå‡ºå£

- å…ˆå£°æ˜ï¼Œå†è°ƒç”¨
- è°ƒç”¨æ‰æ˜¯çœŸæ­£æ‰§è¡Œ

```js
function sum(val1, val2) { // å£°æ˜å‡½æ•°ï¼Œå‡½æ•°å(å½¢å‚)
  let re = val1 + val2
  return re // è¿”å›å€¼ï¼Œå¦‚æœæ²¡æœ‰åˆ™è¿”å›å€¼ä¸º undefined
}
let sum1 = sum(1, 2) //è°ƒç”¨å‡½æ•°ï¼Œè·å¾—è¿”å›å€¼ï¼Œå¹¶èµ‹å€¼ç»™ sum1
console.log(sum1)
console.log(sum(2, 3)) // å¯ä»¥å¤šæ¬¡è°ƒç”¨ï¼Œä¼ å…¥å®å‚
```

### å‡½æ•°å£°æ˜æ–¹å¼

æ–¹å¼ä¸€ï¼šå‡½æ•°å£°æ˜

```js
function sayHello(name) {
  console.log("Hello " + name)
}
sayHello('Tom')
```

æ–¹å¼äºŒï¼šå‡½æ•°è¡¨è¾¾å¼

```js
const sayHello = function(name) {
  console.log("Hello " + name)
}
sayHello('Tom') // å‡½æ•°è°ƒç”¨å¿…é¡»åœ¨å£°æ˜ä¹‹å
```

### è¿”å›å€¼

- ä½¿ç”¨ return æŠŠç»“æœå¯¼å‡º
- å‡½æ•°æ‰§è¡Œåˆ° return å°±**ç«‹å³ç»ˆæ­¢**ï¼Œå‡½æ•°åé¢çš„ä»£ç å°†ä¸ä¼šè¢«æ‰§è¡Œ
- å¦‚æœæ²¡æœ‰è®¾ç½® returnï¼Œé»˜è®¤è¿”å›çš„æ˜¯ undefined

### ç®­å¤´å‡½æ•°

- ç®­å¤´å‡½æ•°èƒ½ç®€åŒ–å‡½æ•°è¡¨è¾¾å¼
- å¦‚æœå‡½æ•°ä½“åªæœ‰ returnï¼Œå»æ‰èŠ±æ‹¬å·
- å¦‚æœå‚æ•°åªæœ‰ä¸€ä¸ªï¼Œå¯ä»¥æŠŠå‚æ•°å°æ‹¬å·å»æ‰

```js
function sum(a, b) { return a + b } // â†“
const sum = function(a, b) { return a + b } // â†“
// ç®­å¤´å‡½æ•°ï¼Œå‡½æ•°ä½“åªæœ‰ return å¯ä»¥çœå»èŠ±æ‹¬å·
const sum = (a, b) => a + b
// æœ‰å…¶ä»–å†…å®¹ï¼ŒèŠ±æ‹¬å·ä¸èƒ½çœ
const sum = (a, b) => { console.log(a + b); return a + b; }
// å‚æ•°åªæœ‰ä¸€ä¸ªï¼Œå¯ä»¥æŠŠå‚æ•°å°æ‹¬å·å»æ‰
const inc = n => ++n
// å¦‚æœè¿”å›çš„å€¼æ˜¯å¯¹è±¡ï¼Œå¯¹è±¡å¿…é¡»åŠ å°æ‹¬å·
const createPet = name => ({name: name})
/*  */
function sum(a) {
  return function(b) { return a + b }
}
// å¯ä»¥å†™æˆ
const sum = a => b => a + b
```

> ğŸŒ° ç»Ÿè®¡å­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—ç¬¦çš„å‡ºç°é¢‘ç‡

åˆ†æï¼šå®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²ã€ä¸€ä¸ªå­˜å‚¨æ¯ä¸ªå­—ç¬¦æ•°é‡çš„å˜é‡ï¼ˆå¯¹è±¡ï¼‰ â†’ éå†å­—ç¬¦ä¸²ï¼ˆforã€for-ofï¼‰â†’

> ğŸŒ° äºŒè¿›åˆ¶è½¬ä¸ºåè¿›åˆ¶

> ğŸŒ° ç”Ÿæˆéšæœº IP åœ°å€

> ğŸŒ° ç”Ÿæˆéšæœº rgbã€HEX é¢œè‰²

> ğŸŒ° æ‰“å°æ¨è¾‰ä¸‰è§’

## é€’å½’

å‡½æ•°è‡ªå·±è°ƒç”¨è‡ªå·±

```js
function fn() {
  fn()
}
fn()
// è‡ªå·±è°ƒç”¨è‡ªå·±ï¼Œè¶…å‡ºäº†ä¸€å®šæ¬¡æ•° RangeError: Maxinum call stack size exceeded
```

ğŸŒ° è®¡ç®—é˜¶ä¹˜

```js
// n! = n*(n-1)*...*3*2*1
// æ­£å¸¸çš„å†™æ³•
function factorial(n) {
  let result = 1
  for(let i = 1; i <= n; i++) {
    result *= i
  }
  return result
}
// é€’å½’å†™æ³•
// f(n) = n*f(n-1)
function f(n) {
  if(n === 1) return 1 // éœ€è¦æœ‰é€€å‡ºæ¡ä»¶
  return n*f(n-1)
}
```

> ğŸŒ° é€’å½’å®ç°æ–æ³¢é‚£å¥‘æ•°åˆ—

```js
// F(0)=0, F(1)=1, F(n)=F(n-1)+F(n-2)
function fib(n) {
  if(n === 0) return 0
  if(n === 1) return 1
  return fib(n-1) + fib(n-2)
}
// å³ä½¿å‰é¢è®¡ç®—äº†F(3)ï¼Œå®ƒä¸‹æ¬¡é‡åˆ°äº†F(3)è¿˜æ˜¯éœ€è¦è®¡ç®—ï¼Œæ€§èƒ½ä¸å¥½
```

ä½¿ç”¨åœºæ™¯ï¼š

- ä¸çŸ¥é“å…·ä½“åµŒå¥—å±‚æ•°çš„æ—¶å€™ï¼Œä¾‹å¦‚æ‰«ææ–‡ä»¶å¤¹ã€æ ‘ç»“æ„ç­‰
- ä¸è€ƒè™‘æ€§èƒ½å’Œç®—æ³•çš„æ—¶å€™

## åŸå§‹ç±»å‹å’Œå¼•ç”¨ç±»å‹

### å­˜å‚¨å†…å®¹ä¸åŒ

æ ˆå†…å­˜ä¸­å­˜å‚¨å†…å®¹ä¸åŒ

- åŸå§‹ç±»å‹å­˜å‚¨çš„æ˜¯å€¼ï¼Œå¤åˆ¶çš„æ˜¯å€¼
- å¼•ç”¨ç±»å‹å­˜å‚¨çš„æ˜¯åœ°å€ï¼Œå¤åˆ¶çš„æ˜¯åœ°å€ï¼Œä¿®æ”¹çš„æ˜¯åœ°å€æŒ‡å‘çš„å†…å®¹

> ğŸŒ° å˜é‡é‡æ–°å¤åˆ¶ä¹‹åè¾“å‡ºä»€ä¹ˆ

```js
// å¤åˆ¶çš„æ˜¯å€¼
let a = 3
let b = a
a = 13
console.log(b) // 3
// å¤åˆ¶çš„æ˜¯åœ°å€
let arr1 = [3, 1, 8]
let arr2 = arr1
arr1[0] = 13
console.log(arr2) // [13, 1, 8]
```

![](https://cdn.wallleap.cn/img/pic/illustration/202303071734561.png)

> ğŸŒ° åˆ¤æ–­ç›¸ç­‰

```js
// åŸå§‹ç±»å‹ æ¯”è¾ƒå€¼
let a = "string"
let b = "string"
console.log(a === b) // true
// å¼•ç”¨ç±»å‹ æ¯”è¾ƒåœ°å€ï¼Œåªè¦æ˜¯æ–°å»ºçš„å°±ä¼šç”Ÿæˆæ–°çš„åœ°å€
let obj1 = { a: 1, b: 2 }
let obj2 = { a: 1, b: 2 }
let obj3 = obj1
console.log( obj1 === obj2, obj1 === obj3) // false true
console.log( {} === {}, [] === []) // false false åˆ¤æ–­æ•°ç»„ä¸ºç©ºå¯ä»¥ä½¿ç”¨ arr.length åˆ¤æ–­
function sum(a, b) { return a+b }
const sum2 = (a, b) => a+b
let sum3 = sum
console.log( sum2 === sum ) // false
console.log( sum3 === sum ) // true åœ°å€ç›¸åŒ
```

### å¼•ç”¨ç±»å‹å’Œå‚æ•°ä¼ é€’

å‡½æ•°çš„å½¢å‚å¦‚æœæ˜¯å¼•ç”¨ç±»å‹ï¼ˆå¯¹è±¡ã€æ•°ç»„ã€å‡½æ•°...ï¼‰ï¼Œæ“ä½œå½¢å‚çš„å†…å®¹å°±æ˜¯æ“ä½œå®å‚çš„å†…å®¹

å‡½æ•°çš„å½¢å‚å¦‚æœæ˜¯åŸå§‹ç±»å‹ï¼Œä¿®æ”¹åéœ€è¦ `return` å‡ºå»

```js
// åŸå§‹ç±»å‹ä½œä¸ºå‚æ•°
function inc(n) {
// ç­‰ä»·äº let n = a
  n++
}
let a = 1
inc(a)
console.log(a) // 1
// ä¿®æ”¹å return
function inc1(n) {
  n++
  return n
}
let b = 1
let c = inc1(b)
console.log(c) // 2
// å¼•ç”¨ç±»å‹ä½œä¸ºå‚æ•°
function incArr(arr) {
// ç­‰ä»·äº let arr = arr1
  arr[0]++
}
let arr1 = [1, 2, 3]
incArr(arr1)
console.log(arr1)  // [2, 2, 3]
```

## å—çº§ä½œç”¨åŸŸ

```js
var a = 1
let b = 2
// whileã€forã€while {...}
if(true) {
  var a = 11
  let b = 22
}
console.log(a, b) // 11 2
```

letã€const å­˜åœ¨å—çº§ä½œç”¨åŸŸï¼Œvar æ²¡æœ‰å—çº§ä½œç”¨åŸŸ

è¿™äº›æ˜¯å—ï¼š

```js
if() {...} else {...}
for() {...}
while() {...}
do{...} while()
{...}
```

## å£°æ˜å˜é‡

varã€letã€const åŒºåˆ«

### var æ˜¯ ES3 å®šä¹‰å˜é‡çš„æ–¹å¼ï¼ˆä¼šæœ‰é—ç•™çš„ç¼ºé™·ï¼‰

```js
console.log(a, b)
var b = 2
console.log(b)
var a = 1
console.log(a+b)
```

åœ¨ä½œç”¨åŸŸå†…å£°æ˜å‰ç½®ï¼Œä¸Šé¢ä»£ç è¿‡ç¨‹ä¼šæ˜¯è¿™æ ·çš„

```js
// åœ¨è¿›å…¥æ–‡ä»¶æ—¶å…ˆå£°æ˜å‰ç½®ï¼Œè¿™æ—¶æ˜¯ undefined
var b
var a
// ç»§ç»­æ‰§è¡Œä»£ç 
console.log(a, b) // undefined undefined
b = 2
console.log(b) // 2
a = 1
console.log(a+b) // 3
```

å¯é‡å¤å£°æ˜

```js
var a = 1
var a
var a = 3
console.log(a) // 3
// â†“ å£°æ˜å‰ç½®
var a
var a
var a
a = 1
a = 3
```

æ²¡æœ‰å—çº§ä½œç”¨åŸŸ

```js
a = 3
var a
{
  var a = 2
}
console.log(a) // 2
```

### let å’Œ const æ˜¯ ES6 å®šä¹‰å˜é‡çš„æ–¹å¼

#### let

å…ˆå£°æ˜å†ä½¿ç”¨ï¼ˆæ— å£°æ˜å‰ç½®ï¼‰

```js
let a = 2
console.log(a) // 2
console.log(b) // error ReferenceError: Cannot access 'b' before initialization
let b
b = 'str'
```

ä¸å¯é‡å¤å£°æ˜

```js
let a
let a = 2 // error SyntaxError: Identifier 'a' has already been declared
```

æœ‰å—çº§ä½œç”¨åŸŸ

```js
let a
{
  let a = 2
  console.log(a) // 2
}
console.log(a) // undefined
```

#### const ç›¸å½“äºå£°æ˜å¸¸é‡

åŒ let ä¸Šé¢çš„

å£°æ˜æ—¶éœ€è¦ç«‹å³åˆå§‹åŒ–

```js
const URL
URL = "api.github.com" // SyntaxError: Missing initializer in const declaration
```

åˆå§‹åŒ–åä¸èƒ½å†ä¿®æ”¹

```js
const URL = 'https://wallleap.cn'
URL = "api.github.com" // TypeError: Assignment to constant variable.
```

ä¸å˜çš„æ˜¯ const å£°æ˜å˜é‡å†…çš„å†…å®¹ï¼Œå¯¹äº**å¼•ç”¨ç±»å‹**ï¼Œå­˜å‚¨çš„æ˜¯åœ°å€ï¼Œåªè¦åœ°å€æ²¡å˜ï¼Œå€¼æ”¹å˜å¯¹è±¡é‡Œé¢çš„å±æ€§å°±ä¸ä¼šæŠ¥é”™ï¼ˆå†æœ‰é‡æ–°èµ‹å€¼è¿™ä¸ªæ“ä½œå°±ä¼šæŠ¥é”™ï¼‰

```js
const a = 1
a = 2 // TypeError: Assignment to constant variable.
a = 1 // TypeError: Assignment to constant variable.
const obj1 = {}
obj1 = {} // TypeError: Assignment to constant variable.
const arr1 = []
arr1 = [] // TypeError: Assignment to constant variable.
arr1 = arr1 // TypeError: Assignment to constant variable.
// æ²¡æœ‰ä¿®æ”¹å­˜å‚¨çš„å†…å®¹
const obj = { name: 'wallleap' }
obj.name = 'luwang'
console.log(obj) // [object Object] { name: "luwang" }
const arr = [1, 2, 3]
arr[arr.length] = 4
console.log(arr) // [1, 2, 3, 4]
```

> è¡¥å……ï¼šEcmaScript ä¸æ¶‰åŠåˆ°å®¿ä¸»å¯¹è±¡ï¼Œæœ€å¼€å§‹ç‰ˆæœ¬ ES 3ï¼ŒES 4 æ²¡æˆå½¢ï¼ŒES 5ã€ES 6 â†’ ES 2015  ES 2016  ES 2017 ...
> å¯ä»¥è¿è¡Œåœ¨æµè§ˆå™¨ï¼ˆDOM BOMï¼‰Node.js å•ç‰‡æœºå†…

## var å’Œ function çš„å£°æ˜å‰ç½®

```js
a = 3
console.log(a) // 3
var a

function fn() {
  console.log(b)
  var b = 10
  console.log(b)
}
fn() // undefined 10

// ç­‰ä»·äº â†“
var a
function fn() {
  var b
  console.log(b)
  b = 10
  console.log(b)
}
a = 3
console.log(a)
fn()
```

> var æ˜¯ç³Ÿç²•ï¼Œå»ºè®®ç”¨ let å’Œ const å–ä»£

```js
var fn3
fn()  // å‡½æ•°å£°æ˜
function fn() {
  console.log('å‡½æ•°å£°æ˜')
}
fn2() // ReferenceError: Cannot access 'fn2' before initialization
const fn2 = function() {
  console.log('å‡½æ•°è¡¨è¾¾å¼')
}
fn3() // TypeError: fn3 is not a function
fn3 = function() {
  console.log('var')
}
```

å‡½æ•°å£°æ˜å¯ä»¥å†™åœ¨å‰é¢ï¼Œå› ä¸ºä¼šå£°æ˜å‰ç½®ï¼›ä½†æ˜¯å‡½æ•°è¡¨è¾¾å¼ä¸å¯ä»¥

## è¯æ³•ä½œç”¨åŸŸã€ä½œç”¨åŸŸé“¾

### ä½œç”¨åŸŸ

ä½œç”¨åŸŸæ˜¯å€¼å’Œè¡¨è¾¾å¼èƒ½**è¢«è®¿é—®**çš„**æ‰§è¡Œä¸Šä¸‹æ–‡**

å¦‚æœå€¼å’Œè¡¨è¾¾å¼ä¸åœ¨å½“å‰ä½œç”¨åŸŸï¼Œå°±æ— æ³•è®¿é—®

```js
// fn ä¸­æ²¡æœ‰ aï¼Œå¤–é¢ä¹Ÿæ²¡æœ‰ a
function fn() {
  console.log(a)
}
fn()  // ReferenceError: a is not defined
// fn ä¸­æœ‰ aï¼Œå…¨å±€æ²¡æœ‰ aï¼Œå¤–é¢è®¿é—®ä¸åˆ°å‡½æ•°ä½œç”¨åŸŸå†…çš„ a
function fn1() {
  let a = 1
  console.log(a)
}
fn1()  // 1
console.log(a)  // ReferenceError: a is not defined
```

ä½œç”¨åŸŸæœ‰å±‚çº§ï¼Œå­ä½œç”¨åŸŸå¯ä»¥è®¿é—®ç¥–å…ˆä½œç”¨åŸŸå˜é‡

```js
// é‡Œé¢æ²¡æœ‰ aï¼Œä¸€å±‚å±‚å¾€å¤–é¢æ‰¾
let a = 1
function fn() {
  console.log(a)
}
fn()  // 1
```

ä½œç”¨åŸŸç§ç±»

- å…¨å±€ä½œç”¨åŸŸ
- å‡½æ•°ä½œç”¨åŸŸ
- å—çº§ä½œç”¨åŸŸï¼ˆèŠ±æ‹¬å·åˆ›å»ºçš„ï¼‰
- æ¨¡å—ä½œç”¨åŸŸï¼ˆæ¨¡å—æ¨¡å¼ä¸‹çš„ï¼‰

### è¯æ³•ä½œç”¨åŸŸ

åˆ›å»ºå‡½æ•°æ‰€åœ¨çš„ä½œç”¨åŸŸ

```js
/* é¦–å…ˆæ˜¯å£°æ˜å‰ç½®ï¼Œç„¶åæ‰æ˜¯è¿è¡Œå‡½æ•° */
function foo() {  // åœ¨å…¨å±€åˆ›å»ºçš„å‡½æ•°ï¼Œæ‰€ä»¥è¯æ³•ä½œç”¨åŸŸå°±æ˜¯å…¨å±€ï¼Œä¸‹é¢çš„ bar ä¹Ÿä¸€æ ·
  console.log('foo')
  bar()  // å†…éƒ¨æ‰¾ä¸åˆ°ï¼Œåˆ°è¯æ³•ä½œç”¨åŸŸä¸­æ‰¾
}
function bar() {
  console.log('bar')
}
foo()
```

### ä½œç”¨åŸŸé“¾

- å½“éœ€è¦è®¿é—®æŸä¸ªå˜é‡æ—¶ï¼Œå…ˆä»**è‡ªå·±ä½œç”¨åŸŸ**æŸ¥æ‰¾ï¼ˆæ‰¾è‡ªå·±ä½œç”¨åŸŸå£°æ˜çš„å˜é‡ã€å½¢å‚ï¼‰
- å¦‚æœæ‰¾ä¸åˆ°ï¼Œå†ä»**åˆ›å»º**å½“å‰å‡½æ•°æ‰€åœ¨çš„ä½œç”¨åŸŸï¼ˆè¯æ³•ä½œç”¨åŸŸï¼‰å»æ‰¾ï¼Œä»¥æ­¤å¾€ä¸Šï¼Œ**ç›´åˆ°å…¨å±€ä½œç”¨åŸŸ**

```js
let a = 0
function foo() {
  let a = 1
  bar()
}
function bar() {
  console.log(a)
}
foo() // 0
/**
* é¦–å…ˆå£°æ˜å‰ç½®
* ç„¶å let a = 0
* æ¥ç€ æ‰§è¡Œ foo
* è¿›å…¥ foo
* æ‰§è¡Œ barï¼Œæ­¤æ—¶å†…éƒ¨æ‰¾ä¸åˆ° barï¼Œä¼šåˆ° foo çš„è¯æ³•ä½œç”¨åŸŸæ‰¾ï¼ˆå³å…¨å±€ï¼‰
* æ‰¾åˆ°äº† barï¼Œæ¥ç€æ‰§è¡Œï¼Œè¿›å…¥ barï¼Œå‘ç°æœ‰ aï¼Œbar çš„ä½œç”¨åŸŸä¸­æ²¡å‘ç° a
* æ­¤æ—¶åˆ° bar çš„è¯æ³•ä½œç”¨åŸŸæ‰¾ï¼ˆå³å…¨å±€ï¼‰ï¼Œæ‰¾åˆ°äº† a æ˜¯ 0
*/
let a = 0
function foo() {
  let a = 1
  bar()
  function bar() {
    console.log(a)
  }
}
foo()  // 1
/**
* é¦–å…ˆå£°æ˜å‰ç½® function foo() { ... }
* let a = 0
* è°ƒç”¨ foo
* è¿›å…¥ fooï¼Œå£°æ˜å‰ç½®ï¼Œfunction bar() { ... }
* let a = 1
* è°ƒç”¨ barï¼Œå½“å‰ä½œç”¨åŸŸæœ‰ barï¼Œç›´æ¥æ‰§è¡Œ
* å‘ç°æœ‰ aï¼Œä½†æ˜¯ bar å‡½æ•°ä½œç”¨åŸŸå†…æ²¡æœ‰ aï¼Œå…ˆå¾€ bar è¯æ³•ä½œç”¨åŸŸæ‰¾
* å‘ç° foo å‡½æ•°ä½œç”¨åŸŸæœ‰ aï¼Œæ‰€ä»¥å°±æ˜¯ 1
*/
```

### TDZ

const å’Œ let å˜é‡åœ¨**å½“å‰ä½œç”¨åŸŸ**çš„**å¼€å¤´åˆ°å½“å‰å£°æ˜**è¯¥å˜é‡çš„åŒºåŸŸå±äºæš‚æ—¶æ€§æ­»åŒºï¼Œä¸å¯è®¿é—®è¯¥å˜é‡

å¦‚æœå‡ºç° varï¼Œéœ€å…³æ³¨ var å£°æ˜å‰ç½®

```js
let a = 0
function fn() {
  a = 2
}
fn()
console.log(a)  // 2
let b = 1
function fn1() {
  b = 2
  let b // ä»å¼€å¤´åˆ°è¿™é‡Œéƒ½æ˜¯ TDZ
}
fn1()
console.log(b)  // ReferenceError: Cannot access 'b' before initialization
```

å†çœ‹ä¸ªä¾‹å­ ğŸŒ°

```js
let a = 0
function foo() {
  bar()
  var a = 1  // å£°æ˜å‰ç½®
  function bar() {
    console.log(a)
  }
}
foo()  // undefined
let b = 0
function fn() {
  f()
  let a = 1  // TDZ
  function f() {
    console.log(a)
  }
}
fn()  // ReferenceError: Cannot access 'a' before initialization
```

ä¾‹å­2 ğŸŒ°

```js
var a = 1
function fn1() {
  function fn2() {
    console.log(a)
  }
  function fn3() {
    var a = 4
    fn2()
  }
  var a = 2
  return fn3
}
var fn = fn1()
fn()
/* æ”¹é€  â†“ */
var a
var fn
function fn1() {
  var a
  function fn2() { ... }
  function fn3() { ... }
  a = 2
  return fn3
}
a = 1
fn = fn1()
fn()   // â† è¿™é‡Œæ‰æ­£å¼å¼€å§‹æ‰§è¡Œ fn1()() â†’ fn3()
/*
* var a
* a = 4
* fn2() â†’ console.log(a) æ­¤æ—¶åœ¨ fn3() ä¸­æ‰§è¡Œï¼Œfn2 ä¸­æ²¡æœ‰ aï¼Œäºæ˜¯å¾€ä¸Šæ‰¾ fn3 é‡Œä¹Ÿæ²¡æœ‰ï¼Œè¿™ä¸ªæ—¶å€™å°±æ‰¾è¯æ³•ä½œç”¨åŸŸ fn1 é‡Œçš„ï¼Œæœ‰ aï¼Œä¸” fn3 æ‰§è¡Œæ˜¯åœ¨ èµ‹å€¼ çš„ä¸‹æ–¹ï¼Œæ‰€ä»¥å€¼ä¸º 2
*/
```

ä¾‹å­3 ğŸŒ°

```js
var a = 1
function fn1() {
  function fn3() {
    function fn2() {
      console.log(a)
    }
    fn2()
    var a = 4
  }
  var a = 2
  return fn3
}
var fn = fn1()
fn()  // undefined
```

1. æ³¨æ„å£°æ˜å‰ç½®
2. æ³¨æ„ä½œç”¨åŸŸé“¾
3. å‡½æ•°æ˜¯æ€æ ·è°ƒç”¨çš„ï¼Œè°ƒç”¨æ‰æ‰§è¡Œ
4. è°ƒç”¨çš„æ—¶å€™ï¼Œå˜é‡åœ¨å“ªé‡Œï¼Œåœ¨æ‰§è¡Œçš„å‰é¢çš„è¯å°±æ˜¯è¿™ä¸ªå€¼ï¼Œåœ¨åé¢çš„è¯çœ‹æœ‰æ²¡æœ‰å£°æ˜å‰ç½®ï¼Œæœ‰çš„è¯ undefinedï¼Œæ²¡æœ‰å°±æŠ¥é”™
